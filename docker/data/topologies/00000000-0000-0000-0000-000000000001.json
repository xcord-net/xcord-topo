{
  "id": "00000000-0000-0000-0000-000000000001",
  "name": "Production â€” Robust",
  "description": "Full HA deployment: Caddy reverse proxy, hub tier with load-balanced servers, shared LiveKit for voice/video, and a FederationGroup that multiplies per-instance infrastructure (Fed Server, PG, Redis, MinIO).",
  "provider": "linode",
  "providerConfig": {},
  "containers": [
    {
      "id": "a0000000-0000-0000-0000-000000000001",
      "name": "xcord-net",
      "kind": "Network",
      "x": 20,
      "y": 20,
      "width": 1300,
      "height": 750,
      "ports": [
        { "id": "b0000000-0000-0000-0000-000000000001", "name": "gateway", "type": "Network", "direction": "InOut", "side": "Left", "offset": 0.5 }
      ],
      "images": [],
      "children": [
        {
          "id": "a0000000-0000-0000-0000-000000000010",
          "name": "proxy-host",
          "kind": "Host",
          "x": 20,
          "y": 20,
          "width": 420,
          "height": 200,
          "ports": [
            { "id": "b0000000-0000-0000-0000-000000000010", "name": "ssh", "type": "Control", "direction": "In", "side": "Left", "offset": 0.5 },
            { "id": "b0000000-0000-0000-0000-000000000011", "name": "public", "type": "Network", "direction": "InOut", "side": "Right", "offset": 0.3 },
            { "id": "b0000000-0000-0000-0000-000000000012", "name": "private", "type": "Network", "direction": "InOut", "side": "Right", "offset": 0.7 }
          ],
          "images": [],
          "children": [
            {
              "id": "a0000000-0000-0000-0000-000000000011",
              "name": "Caddy",
              "kind": "Caddy",
              "x": 20,
              "y": 20,
              "width": 370,
              "height": 130,
              "ports": [
                { "id": "b0000000-0000-0000-0000-000000000020", "name": "http_in", "type": "Network", "direction": "In", "side": "Top", "offset": 0.3 },
                { "id": "b0000000-0000-0000-0000-000000000021", "name": "https_in", "type": "Network", "direction": "In", "side": "Top", "offset": 0.7 },
                { "id": "b0000000-0000-0000-0000-000000000022", "name": "upstream", "type": "Network", "direction": "Out", "side": "Bottom", "offset": 0.5 }
              ],
              "images": [],
              "children": [],
              "config": {
                "domain": "chat.example.com"
              }
            }
          ],
          "config": {}
        },
        {
          "id": "a0000000-0000-0000-0000-000000000020",
          "name": "hub-host",
          "kind": "Host",
          "x": 480,
          "y": 20,
          "width": 380,
          "height": 300,
          "ports": [
            { "id": "b0000000-0000-0000-0000-000000000030", "name": "ssh", "type": "Control", "direction": "In", "side": "Left", "offset": 0.5 },
            { "id": "b0000000-0000-0000-0000-000000000031", "name": "public", "type": "Network", "direction": "InOut", "side": "Right", "offset": 0.3 },
            { "id": "b0000000-0000-0000-0000-000000000032", "name": "private", "type": "Network", "direction": "InOut", "side": "Right", "offset": 0.7 }
          ],
          "images": [
            {
              "id": "c0000000-0000-0000-0000-000000000001",
              "name": "Hub Server",
              "kind": "HubServer",
              "x": 20,
              "y": 20,
              "width": 140,
              "height": 60,
              "ports": [
                { "id": "d0000000-0000-0000-0000-000000000001", "name": "http", "type": "Network", "direction": "In", "side": "Top", "offset": 0.5 },
                { "id": "d0000000-0000-0000-0000-000000000002", "name": "pg_connection", "type": "Database", "direction": "Out", "side": "Bottom", "offset": 0.3 },
                { "id": "d0000000-0000-0000-0000-000000000003", "name": "redis_connection", "type": "Database", "direction": "Out", "side": "Bottom", "offset": 0.7 }
              ],
              "dockerImage": "ghcr.io/xcord/hub:latest",
              "config": { "replicas": "3" }
            },
            {
              "id": "c0000000-0000-0000-0000-000000000020",
              "name": "PostgreSQL",
              "kind": "PostgreSQL",
              "x": 20,
              "y": 120,
              "width": 120,
              "height": 50,
              "ports": [
                { "id": "d0000000-0000-0000-0000-000000000040", "name": "postgres", "type": "Database", "direction": "In", "side": "Top", "offset": 0.5 }
              ],
              "dockerImage": "postgres:17-alpine",
              "config": { "replicas": "1", "volumeSize": "50" }
            },
            {
              "id": "c0000000-0000-0000-0000-000000000021",
              "name": "Redis",
              "kind": "Redis",
              "x": 200,
              "y": 120,
              "width": 120,
              "height": 50,
              "ports": [
                { "id": "d0000000-0000-0000-0000-000000000050", "name": "redis", "type": "Database", "direction": "In", "side": "Top", "offset": 0.5 }
              ],
              "dockerImage": "redis:7-alpine",
              "config": { "replicas": "1", "volumeSize": "10" }
            }
          ],
          "children": [],
          "config": {}
        },
        {
          "id": "a0000000-0000-0000-0000-000000000025",
          "name": "media-host",
          "kind": "Host",
          "x": 900,
          "y": 20,
          "width": 340,
          "height": 200,
          "ports": [
            { "id": "b0000000-0000-0000-0000-000000000060", "name": "ssh", "type": "Control", "direction": "In", "side": "Left", "offset": 0.5 },
            { "id": "b0000000-0000-0000-0000-000000000061", "name": "public", "type": "Network", "direction": "InOut", "side": "Right", "offset": 0.3 },
            { "id": "b0000000-0000-0000-0000-000000000062", "name": "private", "type": "Network", "direction": "InOut", "side": "Right", "offset": 0.7 }
          ],
          "images": [
            {
              "id": "c0000000-0000-0000-0000-000000000030",
              "name": "LiveKit",
              "kind": "LiveKit",
              "x": 20,
              "y": 20,
              "width": 120,
              "height": 50,
              "ports": [
                { "id": "d0000000-0000-0000-0000-000000000030", "name": "rtc", "type": "Network", "direction": "In", "side": "Top", "offset": 0.3 },
                { "id": "d0000000-0000-0000-0000-000000000031", "name": "api", "type": "Network", "direction": "In", "side": "Top", "offset": 0.7 },
                { "id": "d0000000-0000-0000-0000-000000000032", "name": "redis_connection", "type": "Database", "direction": "Out", "side": "Bottom", "offset": 0.5 }
              ],
              "dockerImage": "livekit/livekit-server:latest",
              "config": { "replicas": "1" }
            }
          ],
          "children": [],
          "config": { "replicas": "2", "minReplicas": "1", "maxReplicas": "5" }
        },
        {
          "id": "a0000000-0000-0000-0000-000000000021",
          "name": "federation",
          "kind": "FederationGroup",
          "x": 20,
          "y": 280,
          "width": 1220,
          "height": 400,
          "ports": [
            { "id": "b0000000-0000-0000-0000-000000000040", "name": "federation", "type": "Network", "direction": "InOut", "side": "Right", "offset": 0.5 },
            { "id": "b0000000-0000-0000-0000-000000000041", "name": "control", "type": "Control", "direction": "In", "side": "Left", "offset": 0.5 }
          ],
          "images": [],
          "children": [
            {
              "id": "a0000000-0000-0000-0000-000000000030",
              "name": "fed-host",
              "kind": "Host",
              "x": 20,
              "y": 20,
              "width": 1160,
              "height": 320,
              "ports": [
                { "id": "b0000000-0000-0000-0000-000000000050", "name": "ssh", "type": "Control", "direction": "In", "side": "Left", "offset": 0.5 },
                { "id": "b0000000-0000-0000-0000-000000000051", "name": "public", "type": "Network", "direction": "InOut", "side": "Right", "offset": 0.3 },
                { "id": "b0000000-0000-0000-0000-000000000052", "name": "private", "type": "Network", "direction": "InOut", "side": "Right", "offset": 0.7 }
              ],
              "images": [
                {
                  "id": "c0000000-0000-0000-0000-000000000002",
                  "name": "Federation Server",
                  "kind": "FederationServer",
                  "x": 20,
                  "y": 20,
                  "width": 140,
                  "height": 60,
                  "ports": [
                    { "id": "d0000000-0000-0000-0000-000000000010", "name": "http", "type": "Network", "direction": "In", "side": "Top", "offset": 0.5 },
                    { "id": "d0000000-0000-0000-0000-000000000011", "name": "pg_connection", "type": "Database", "direction": "Out", "side": "Bottom", "offset": 0.2 },
                    { "id": "d0000000-0000-0000-0000-000000000012", "name": "redis_connection", "type": "Database", "direction": "Out", "side": "Bottom", "offset": 0.5 },
                    { "id": "d0000000-0000-0000-0000-000000000013", "name": "minio_connection", "type": "Storage", "direction": "Out", "side": "Bottom", "offset": 0.8 }
                  ],
                  "dockerImage": "ghcr.io/xcord/fed:latest",
                  "config": { "replicas": "$TIER_REPLICAS" }
                },
                {
                  "id": "c0000000-0000-0000-0000-000000000010",
                  "name": "PostgreSQL",
                  "kind": "PostgreSQL",
                  "x": 20,
                  "y": 120,
                  "width": 120,
                  "height": 50,
                  "ports": [
                    { "id": "d0000000-0000-0000-0000-000000000041", "name": "postgres", "type": "Database", "direction": "In", "side": "Top", "offset": 0.5 }
                  ],
                  "dockerImage": "postgres:17-alpine",
                  "config": { "replicas": "1", "volumeSize": "25" }
                },
                {
                  "id": "c0000000-0000-0000-0000-000000000011",
                  "name": "Redis",
                  "kind": "Redis",
                  "x": 200,
                  "y": 120,
                  "width": 120,
                  "height": 50,
                  "ports": [
                    { "id": "d0000000-0000-0000-0000-000000000051", "name": "redis", "type": "Database", "direction": "In", "side": "Top", "offset": 0.5 }
                  ],
                  "dockerImage": "redis:7-alpine",
                  "config": { "replicas": "1", "volumeSize": "10" }
                },
                {
                  "id": "c0000000-0000-0000-0000-000000000012",
                  "name": "MinIO",
                  "kind": "MinIO",
                  "x": 380,
                  "y": 120,
                  "width": 120,
                  "height": 50,
                  "ports": [
                    { "id": "d0000000-0000-0000-0000-000000000060", "name": "s3", "type": "Storage", "direction": "In", "side": "Top", "offset": 0.5 }
                  ],
                  "dockerImage": "minio/minio:latest",
                  "config": { "replicas": "1", "volumeSize": "50" }
                }
              ],
              "children": [],
              "config": {}
            }
          ],
          "config": {
            "domain": "chat.example.com",
            "instanceCount": "$FED_INSTANCES"
          }
        }
      ],
      "config": {}
    }
  ],
  "wires": [
    {
      "id": "e0000000-0000-0000-0000-000000000001",
      "fromNodeId": "a0000000-0000-0000-0000-000000000011",
      "fromPortId": "b0000000-0000-0000-0000-000000000022",
      "toNodeId": "a0000000-0000-0000-0000-000000000021",
      "toPortId": "b0000000-0000-0000-0000-000000000041"
    },
    {
      "id": "e0000000-0000-0000-0000-000000000002",
      "fromNodeId": "c0000000-0000-0000-0000-000000000001",
      "fromPortId": "d0000000-0000-0000-0000-000000000002",
      "toNodeId": "c0000000-0000-0000-0000-000000000020",
      "toPortId": "d0000000-0000-0000-0000-000000000040"
    },
    {
      "id": "e0000000-0000-0000-0000-000000000003",
      "fromNodeId": "c0000000-0000-0000-0000-000000000001",
      "fromPortId": "d0000000-0000-0000-0000-000000000003",
      "toNodeId": "c0000000-0000-0000-0000-000000000021",
      "toPortId": "d0000000-0000-0000-0000-000000000050"
    },
    {
      "id": "e0000000-0000-0000-0000-000000000004",
      "fromNodeId": "c0000000-0000-0000-0000-000000000002",
      "fromPortId": "d0000000-0000-0000-0000-000000000011",
      "toNodeId": "c0000000-0000-0000-0000-000000000010",
      "toPortId": "d0000000-0000-0000-0000-000000000041"
    },
    {
      "id": "e0000000-0000-0000-0000-000000000005",
      "fromNodeId": "c0000000-0000-0000-0000-000000000002",
      "fromPortId": "d0000000-0000-0000-0000-000000000012",
      "toNodeId": "c0000000-0000-0000-0000-000000000011",
      "toPortId": "d0000000-0000-0000-0000-000000000051"
    },
    {
      "id": "e0000000-0000-0000-0000-000000000006",
      "fromNodeId": "c0000000-0000-0000-0000-000000000002",
      "fromPortId": "d0000000-0000-0000-0000-000000000013",
      "toNodeId": "c0000000-0000-0000-0000-000000000012",
      "toPortId": "d0000000-0000-0000-0000-000000000060"
    },
    {
      "id": "e0000000-0000-0000-0000-000000000007",
      "fromNodeId": "c0000000-0000-0000-0000-000000000030",
      "fromPortId": "d0000000-0000-0000-0000-000000000032",
      "toNodeId": "c0000000-0000-0000-0000-000000000021",
      "toPortId": "d0000000-0000-0000-0000-000000000050"
    }
  ],
  "schemaVersion": 1,
  "createdAt": "2026-02-20T00:00:00Z",
  "updatedAt": "2026-02-20T00:00:00Z"
}
